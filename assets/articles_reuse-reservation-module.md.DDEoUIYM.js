import{_ as e,c as t,o as a,a4 as o,az as s,aA as r,aB as i,aC as l,aD as n,aE as d,aF as u,aG as h,aH as c,aI as p,aJ as g,aK as m,aL as b}from"./chunks/framework.BGFi9fUZ.js";const R=JSON.parse('{"title":"Reuse table reservation module to build chatbot","description":["Reuse table reservation module to build a chatbot"],"frontmatter":{"article":true,"date":"2023-04-02T00:00:00.000Z","image":["blog/banner/tutorial_reservation_chatbot.png"],"description":["Reuse table reservation module to build a chatbot"],"author":"Sunny May"},"headers":[],"relativePath":"articles/reuse-reservation-module.md","filePath":"articles/reuse-reservation-module.md","lastUpdated":1703166228000}'),y={name:"articles/reuse-reservation-module.md"},f=o(`<h1 id="reuse-table-reservation-module-to-build-chatbot" tabindex="-1">Reuse table reservation module to build chatbot <a class="header-anchor" href="#reuse-table-reservation-module-to-build-chatbot" aria-label="Permalink to &quot;Reuse table reservation module to build chatbot&quot;">â€‹</a></h1><p>OpenCUI provides a mechanism for builders to share modules with each other. This means that you can take advantage of the expertise of others, which can save time and effort in building new chatbots.</p><p>Modules are reusable and composable, and can be enabled or disabled service as needed. In some cases, it may be possible to reuse one or more modules within a chatbot. However, when doing this, it is important to ensure that the modules are compatible with each other and the corresponding implementations of service interfaces are also wired. This will ensure that the module works as expected in the chatbot.</p><p>To use a pre-existing module, you first need to find a module that you are interested in. Then, you can simply import it into your chatbot, and use the functionality of the module directly in your chatbot. Modules are developed and maintained by other builders, so you can be confident that they are of high quality. You can also update modules as needed, which ensures that your chatbot always has the latest features and functionality. For more background and details about modules, see &quot;<a href="./../reference/guide/reuse-component.html">Reuse an hours module</a>&quot;.</p><p>This guide will use table reservation as an example to show how to reuse the <a href="https://build.opencui.io/org/me.restaurant/agent/tableReservation/struct/type" target="_blank" rel="noreferrer">tableReservation</a> module in your chatbot. When you are done with this guide, the chatbot can help users make, view, and cancel table reservations. For example, a user might say the following to the chatbot:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">User: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hi, I&#39;d like to reserve a table, please.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Chatbot: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;How many people will you need the reservation for?&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">User: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;There will be two of us.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Chatbot: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Which day will you be joining us on?&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">User: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This Sunday.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Chatbot: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;What time would you like the reservation for?&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">User: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;About 3pm.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Chatbot: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Are you sure to book a table for 2 at 3:00 PM on Sunday, December 25, 2022?&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">User: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Yes.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Chatbot: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Your reservation has been made. We&#39;ll see you at 3:00 PM on Sunday, December 25, 2022. You can check the reservation under your ID: xxxx.&quot;</span></span></code></pre></div><p>To reuse the <code>tableReservation</code> module, you need to understand the following dependencies:</p><ol><li><a href="./reservation-cui-design.html">Table reservation CUI design</a>: This is is the blueprint for the user experience and service scope of the table reservation module.</li><li><a href="./reservation/reservation-api.html">Reservation API</a>: This is the API that the module relies on.</li><li><a href="./reservation/google-calendar-reservation.html">Google Calendar provider</a>: This is the backend that the chatbot uses to store reservations. It means that you need a Google Workspace account.</li></ol><h2 id="before-you-start" tabindex="-1">Before you start <a class="header-anchor" href="#before-you-start" aria-label="Permalink to &quot;Before you start&quot;">â€‹</a></h2><ol><li>Log in to <a href="https://build.opencui.io/login" target="_blank" rel="noreferrer">OpenCUI</a>.</li><li>Follow the <a href="./../reference/guide/index.html">quickstart guide</a> to learn the basics of OpenCUI.</li><li>Set up <a href="./reservation/google-calendar-reservation.html#set-up-google-workspace">Google Workspace</a> and <a href="./reservation/google-calendar-reservation.html#set-up-service-account">service account</a>.</li></ol><h2 id="set-up-google-calendar" tabindex="-1">Set up Google Calendar <a class="header-anchor" href="#set-up-google-calendar" aria-label="Permalink to &quot;Set up Google Calendar&quot;">â€‹</a></h2><p>Under the design of the reservation API, resources are the entities that users can book, reserve or make appointment, such as tables in a restaurant or hairdressers. Resources are always associated with a specific location, and before users can book a resource, you need to first prepare the business-specific locations and resources in the backend. Different backends may have different ways of defining which resources are available for booking. <a href="./reservation/google-calendar-reservation.html">Google Calendar based backend</a> use Google Admin console to define table resources and Google Calendar to store reservations.</p><p>To set up your table resources:</p><ol><li>In the <strong>Google Admin console</strong>, add buildings as locations first and then add resources for each location to make them available for users to book.</li><li>In the <strong>Google Calendar</strong>, set your business hours, including blocking off times when users cannot book tables (e.g., when you are closed).&quot;</li></ol><p>We will use the following business information as an example to show you how to set up your resources.</p><ol><li><strong>Restaurant name</strong>: My First Restaurant</li><li><strong>Timezone</strong>: America/Los_Angeles</li><li><strong>Business hours</strong><ul><li>Monday: Closed</li><li>Tuesday to Sunday: 11:00 AM - 10:00 PM</li></ul></li><li><strong>Bookable resources</strong></li></ol><table><thead><tr><th style="text-align:left;">Resource name</th><th style="text-align:left;">Resource type</th><th style="text-align:left;">Capacity</th><th style="text-align:left;">Duration</th></tr></thead><tbody><tr><td style="text-align:left;">Small table</td><td style="text-align:left;">table</td><td style="text-align:left;">2 guests</td><td style="text-align:left;">2 hours</td></tr><tr><td style="text-align:left;">Medium table</td><td style="text-align:left;">table</td><td style="text-align:left;">4 guests</td><td style="text-align:left;">2 hours</td></tr><tr><td style="text-align:left;">Large table</td><td style="text-align:left;">table</td><td style="text-align:left;">8 guests</td><td style="text-align:left;">2 hours</td></tr></tbody></table><h3 id="add-resources-in-admin-console" tabindex="-1">Add resources in Admin console <a class="header-anchor" href="#add-resources-in-admin-console" aria-label="Permalink to &quot;Add resources in Admin console&quot;">â€‹</a></h3><p>To add resources, it is important to specify the location, or building in Google Calendar, they belong to. Once you have added a building, you can then add the desired resources. Before you start, make sure you sign in to your <a href="https://admin.google.com/" target="_blank" rel="noreferrer">Google Admin console</a>.</p><h4 id="add-a-building" tabindex="-1">Add a building <a class="header-anchor" href="#add-a-building" aria-label="Permalink to &quot;Add a building&quot;">â€‹</a></h4><ol><li><p>To go the Buildings section:</p><ol><li>From the <strong>Main Menu</strong> in the Google Admin console, select <strong>Directory</strong> &gt; <strong>Buildings and resources</strong> &gt; <strong>Manage resources</strong>.</li><li>Click <strong>ADD BUILDING</strong>.</li></ol><p><img src="`+s+'" alt="resource management"></p></li><li><p>To add a building:</p><ol><li>In the Buildings section, click <strong>Add building</strong>.</li><li>Fill in the form with the following information and add: <ul><li><strong>Id</strong>: 1</li><li><strong>Name</strong>: My First Restaurant</li><li><strong>Description</strong>: <code>{&quot;timezone&quot;: &quot;America/Los_Angeles&quot;}</code></li><li><strong>Floors</strong>: 1</li></ul></li><li>Click <strong>ADD BUILDING</strong>.</li><li>Switch back to <strong>Resources</strong>.</li></ol><p><img src="'+r+'" alt="add building"></p></li></ol><h4 id="add-resources" tabindex="-1">Add resources <a class="header-anchor" href="#add-resources" aria-label="Permalink to &quot;Add resources&quot;">â€‹</a></h4><ol><li><p>To add the first resource in the <a href="#set-up-resources">business information</a> :</p><ol><li>In the Resources section, click <strong>Add new resource</strong>.</li><li>Fill in the form with the following information: <ul><li><strong>Category</strong>: Other resource</li><li><strong>Type</strong>: table</li><li><strong>Building</strong>: My First Restaurant</li><li><strong>Resource name</strong>: Small table</li><li><strong>Description (internal)</strong>: <code>{&quot;@class&quot;:&quot;me.restaurant.tableReservation.Table&quot;, &quot;durations&quot;: [3600], &quot;capacity&quot;: 2}</code></li></ul></li><li>Click <strong>ADD RESOURCE</strong>.</li></ol><p><img src="'+i+'" alt="add resource"></p></li><li><p>To add the other two resources, repeat the same steps but change each value in the <strong>Description</strong> field.</p><ul><li>For the medium table: <code>{&quot;@class&quot;:&quot;me.restaurant.tableReservation.Table&quot;, &quot;durations&quot;: [3600], &quot;capacity&quot;: 4}</code></li><li>For the large table: <code>{&quot;@class&quot;:&quot;me.restaurant.tableReservation.Table&quot;, &quot;durations&quot;: [3600], &quot;capacity&quot;: 8}</code></li></ul></li></ol><p>After completing these steps, your building and resources should look like the screenshot below.</p><p><img src="'+l+'" alt="resources example"></p><h3 id="block-time-in-google-calendar" tabindex="-1">Block time in Google Calendar <a class="header-anchor" href="#block-time-in-google-calendar" aria-label="Permalink to &quot;Block time in Google Calendar&quot;">â€‹</a></h3><p>In order to prevent users making reservations when the restaurant is closed, you should block off any times outside of its opening hours. To do this:</p><p>[//]:&lt;&gt;(should we explain what is the primary calendar and resource calendar so that they know their way around?)</p><ol><li>Add events in your primary calendar to block time.</li><li>Add resource calendars to your calendar so you can manage events in those calendars.</li><li>Respond to event invitations in those calendars to confirm that the time slots are blocked off.</li></ol><p>[//]:&lt;&gt;(Should we make this a tip) Before you start, make sure you are an <a href="https://support.google.com/a/answer/172176?hl=en" target="_blank" rel="noreferrer">admin</a> first, then sign in to your <a href="https://calendar.google.com" target="_blank" rel="noreferrer">Google Calendar</a>.</p><h4 id="add-events-to-block-time" tabindex="-1">Add events to block time <a class="header-anchor" href="#add-events-to-block-time" aria-label="Permalink to &quot;Add events to block time&quot;">â€‹</a></h4><ol><li><p>In your primary calendar, double-click the schedule.</p></li><li><p>Specify the event details below and click <strong>Save</strong>:</p><ul><li><strong>Title</strong>: Closed</li><li><strong>Time</strong>: <code>12:00am</code> to <code>11:00am</code> (Select appropriate start and end dates based on the current date.)</li><li><strong>Repeat</strong>: Weekly on Sunday, Tuesday, Wednesday, Thursday, Friday, Saturday</li><li><strong>Rooms</strong>: <ul><li>(table)-My First Restaurant-1-Large table</li><li>(table)-My First Restaurant-1-Medium table</li><li>(table)-My First Restaurant-1-Small table</li></ul></li></ul><p><img src="'+n+'" alt="add event"></p></li></ol><p>[//]:&lt;&gt;(step 6?) 3. Repeat step 6 to create additional events with the following details, then adjust the <strong>time</strong> and <strong>Repeat</strong> fields as needed:</p><ul><li>Event 2 <ul><li><strong>Time</strong>: <code>10:00pm</code> to <code>11:59am</code> (Select appropriate start and end dates based on the current date.)</li><li><strong>Repeat</strong>: Weekly on Sunday, Tuesday, Wednesday, Thursday, Friday, Saturday</li></ul></li><li>Event 3 <ul><li><strong>Time</strong>: Select appropriate start and end dates based on the current date. (e.g., <code>Mar 6, 2023</code> to <code>Mar 6, 2023</code>)</li><li><strong>Repeat</strong>: Weekly on Monday</li></ul></li></ul><h4 id="add-resources-calendar" tabindex="-1">Add resources calendar <a class="header-anchor" href="#add-resources-calendar" aria-label="Permalink to &quot;Add resources calendar&quot;">â€‹</a></h4><ol><li><p>On Other calendars, click <strong>+</strong> &gt; <strong>Browse resources</strong>. If you don&#39;t see this option, wait a few hours for ACL changes to take effect before managing resources.</p><p><img src="'+d+'" alt="browse resources"></p></li><li><p>Tick the table resources you need.</p><p><img src="'+u+'" alt="tick resources"></p></li><li><p>Back to your calendars, choose one resource calendar, and click <strong>Settings and sharing</strong>.</p><p><img src="'+h+'" alt="click resoure"></p></li><li><p>Ensure the resource calendar&#39;s timezone matches its location to avoid scheduling errors.</p><p><img src="'+c+'" alt="check timezone"></p></li><li><p>Repeat steps 3-4 to check the timezone of the other two resource calendars.</p></li></ol><h4 id="respond-to-event-invitations" tabindex="-1">Respond to event invitations <a class="header-anchor" href="#respond-to-event-invitations" aria-label="Permalink to &quot;Respond to event invitations&quot;">â€‹</a></h4><ol><li>Open each resource calendar and locate the three events that you added.</li><li>At the bottom of each event, select <strong>Yes</strong> as a response for all recurring events.</li></ol><p>After completing these steps, your resource calendars should resemble the example below.</p><p><img src="'+p+'" alt="calendar example"></p><h2 id="reuse-tablereservation-module" tabindex="-1">Reuse tableReservation module <a class="header-anchor" href="#reuse-tablereservation-module" aria-label="Permalink to &quot;Reuse tableReservation module&quot;">â€‹</a></h2><h3 id="import-the-module" tabindex="-1">Import the module <a class="header-anchor" href="#import-the-module" aria-label="Permalink to &quot;Import the module&quot;">â€‹</a></h3><p>Now it&#39;s time to create a table reservation chatbot and reuse the table reservation module.</p><ol><li>Create a chatbot and add the <strong>English(en)</strong> language.</li><li><a href="./../reference/platform/reusability.html#import-1">Import</a> the <a href="https://build.opencui.io/org/me.restaurant/agent/tableReservation/struct/type" target="_blank" rel="noreferrer">table reservation module</a> into your chatbot.</li></ol><h3 id="wire-the-provider" tabindex="-1">Wire the provider <a class="header-anchor" href="#wire-the-provider" aria-label="Permalink to &quot;Wire the provider&quot;">â€‹</a></h3><p>Before you can use the functionality provided by the reservation API, you should declare a reservation service first, then wire the reservation provider to the service.</p><p>To wire the reservation provider:</p><ol><li>Enter the chatbot you just created.</li><li>In the navigation bar, select the <strong>Settings</strong> tab and head to <strong>Integrations</strong> page. In the <strong>Debug service provider</strong> section: <ul><li>Click <strong>Select service</strong> and select <code>services.opencui.reservation.IReservation</code>.</li><li>Follow <a href="./reservation/google-calendar-reservation.html#set-up-google-calendar-reservation-provider">set up Google calendar reservation provider</a> to complete this integration.</li></ul></li></ol><h2 id="test-the-chatbot" tabindex="-1">Test the chatbot <a class="header-anchor" href="#test-the-chatbot" aria-label="Permalink to &quot;Test the chatbot&quot;">â€‹</a></h2><p>Finally, you can try to use your chatbot to make a table reservation. To test the chatbot:</p><ol><li><p>Use <a href="./../reference/platform/testing.html#debug">Debug</a> to send &quot;<em>I want to book a table</em>&quot; to start making a reservation. Then provide the number of guests, date and time. If there is an available table, you can book it successfully. For example:</p><p><img src="'+g+'" alt="example conversation"></p></li><li><p>Once you&#39;ve made a reservation, you can go to your Google Calendar and check that reservation. Here is the reservation made by the above example:</p><p><img src="'+m+'" alt="example reservation"></p></li></ol><p>The picture below shows how the reservation is made.</p><p><img src="'+b+'" alt="message process"></p><p>:ðŸŽ‰: Well done! You&#39;ve built a table reservation chatbot. To explore more use cases, you can check the <a href="./../reference/platform/testing.html#test-cases">Test cases</a> in the <a href="https://build.opencui.io/org/me.restaurant/agent/tableReservationApp/en/type?page=0&amp;imported=false&amp;search=&amp;category=ALL" target="_blank" rel="noreferrer">tableReservationApp</a> chatbot.</p>',54),k=[f];function v(q,w,_,E,x,F){return a(),t("div",null,k)}const C=e(y,[["render",v]]);export{R as __pageData,C as default};
